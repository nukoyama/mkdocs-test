---
title: kaishi チュートリアル（最小限）
---

# かいし

- kaishi チュートリアル（最小限）
  - そもそも
    - latex インストール
    - git インストール
    - vscode インストール
      - latex workshop インストール
      - `settings.json` 配置
    - `latexmkrc` 配置
  - githubからソースをDL
  - 自分の作業ディレクトリを作成
    - `/tex/` 以下に tex ファイルを作成
    - template をコピペ
    - プリアンブルは sty ファイルに書く
  - タイプセット方法


# はじめに

このページでは、会誌（kaishi）で自分の記事を書くための手順を簡潔に述べます。

会誌はもちろん LaTeX を使って書いてもらいます。


# そもそも

まず前提として、次の3つを自分のPCにインストールしておいてください；

- LaTeX (TeX Live)
- vscode（エディタ）
- Git


## LaTeX のインストール

会誌は Word じゃなくて LaTeX で書いてもらいます。

[この記事](https://nukoyama.github.io/mkdocs-test/tex/tutorial01/#pc)
に従って、LaTeX をインストールしてください。


## vscode のインストール

vscode はエディタです。

エディタは何でもいいのですが、各々の環境に合わせて設定するのは面倒なので、
とくにこだわりのない人は全員 vscode を使ってください。

[この記事](https://nukoyama.github.io/mkdocs-test/tex/tutorial01/#vscode)
に従って、vscode と、その拡張機能「LaTeX Workshop」をインストールしてください。


## GitHub のアカウント作成

詳しくは説明しませんが、ファイルのバージョン管理ツールとして「Git」というものがあります。

会誌の作成では、Git を利用したサービスのひとつである「[GitHub](https://github.com)」を利用します。

GitHub というWebサービスを利用することで、会誌の共同開発が可能になります。

まずは、[GitHub のサイト](https://github.com) に飛んでもらって、
各自アカウントを作成してください。

自分のアカウントが作成できたら、[物科研の Organization](https://github.com/vuccaken) に参加してもらいます。

既に参加済みの人に、自分の GitHub アカウントを教えて、招待してもらってください。


## GitHub Desktop のインストール

Git の CUI（コマンドライン）での操作は初心者には大変なので、
GUI アプリの「[GitHub Desktop](https://desktop.github.com)」
を利用することにします。

下記リンクから GitHub Desktop をインストールしてください；

- [GitHub Desktop | Simple collaboration from your desktop](https://desktop.github.com)

!!! note
    GitHub を利用するには、まず Git がインストール済みである必要があります。  
    Mac では標準で Git がインストール済みですが、Windows ではそうではありません。  
    しかし、GitHub Desktop に Git が付属しているらしいので、結局気にしなくてよいです。

!!! Tip
    デフォルトのエディタを vscode に設定しておくとよいです。


# 会誌の作成

## 会誌リポジトリのクローン

GitHub にある本年度の会誌を丸ごと自分のPCにクローン（ダウンロード）します。

[会誌のリポジトリ]() へアクセスし、「Code」と書いてある緑色のボタンをクリックし、
「Open with GitHub Desktop」を選択します。

GitHub Desktop で開いたら、「Local Path」を好きな所に設定して、リポジトリをクローンします。

以上で、自分のPC内で会誌を編集することができるようになりました。


## 自分の記事の作成

まず、テキトーに自分の名前を決めましょう（以下、`<NAME>` とする）。
他人と識別さえできれば何でもいいです。

例えば、`nkym` とか `CrazyAppleEter` とか `kasumin` とかで、使える文字はアルファベットか数字ぐらいです。
無難に苗字のローマ字でいいです。


### 自分の作業 Branch を作成

GitHub Desktop で会誌のリポジトリを開きます。

ウインドウ上部中央にある「Current Branch」をクリックし、
「New Branch」ボタンをクリックします。

さっき決めた自分の名前を `<NAME>` として、次のような名前でブランチを作成します；

```
feature-article-<NAME>
```

以後、このブランチが、自分の記事を編集する作業ブランチとなります。

作業する際は、「Current Branch」が `master` や `develop` ではなく、
自分の作業ブランチ `feature-article-<NAME>` になっていることを確認してください。


### 自分の作業ディレクトリを作成

自分の会誌記事を入れておく、作業ディレクトリを作成します。

クローンした会誌のリポジトリを vscode で開きます。

!!! note
    GitHub Desktop アプリでリポジトリを表示し
    - `cmd + shift + A` (mac)
    - `ctrl + shift + A` {windows}
    のキーバインドを入力すれば、勝手にリポジトリを vscode で開いてくれます。

kaishi の `/tex/` ディレクトリ以下に、自分の名前でディレクトリを作成します；

```hl_lines="3"
/tex/
|- ...
|- <NAME>/
...
```

次に、その中に同じ名前（`<NAME>`）で tex ファイルと sty ファイルを作成します；

```hl_lines="4 5"
/tex/
|- ...
|- <NAME>/
|   |- <NAME>.sty
|   `- <NAME>.tex
...
```

さらに、画像を入れておくディレクトリ `img/` を作成します；

```hl_lines="4"
/tex/
|- ...
|- <NAME>/
|   |- img/
|   |- <NAME>.sty
|   `- <NAME>.tex
...
```

!!! attention
    `.gitignore` の設定で、`/tex/*/` の階層にある pdf ファイルは無視するようにしているので、
    記事に挿入するために用意した pdf をそこに直置きしてしまうと、リモートにはアップロードしてくれません。

    なので、名前は何でもいいので、サブディレクトリ `img/` を作成し、その中に画像ファイルを入れてください。

最後に、`/tex/_template/template.tex` の内容を丸々コピーしてきて、作成した自分の tex ファイルにペーストします。

プリアンブルの `\usepackage{template}` のところを、
自分の sty ファイル名 `\usepackage{<NAME>}` に変更してください。


## 会誌のタイプセット（vscode）

### 設定ファイルの配置

タイプセットは vscode で行います。

はじめに、vscode の設定ファイルを配置します。

`/etc/` ディレクトリにある `.vscode/setteings.json` を **コピー** して、
一番上の階層にペーストします；

```hl_lines="2 3"
/
|- .vscode/
|     `- setteings.json
|- ect/
|   `- .vscode/
|         `- setteings.json
|- fonts/
|- sty/
|- tex/
...
```

一旦 vscode を再起動します。
改めて会誌のリポジトリを開いてください。

!!! info
    初めから用意していた `setteings.json` はあくまでテンプレのつもりです。

    再配置した `/.vscode/setteings.json` は `.gitignore` に指定してあるので、
    カスタムしたい人は自由に編集してください。
    （`/ect/` の中にある方はそのまま残しておいてください）


### タイプセット

設定ファイルを配置したら、会誌のリポジトリを開いて、
自分の会誌記事の tex ファイルを選択してタブで開きます。

左のサイドバーにある「TEX」アイコンをクリックし、
「Build LaTeX project」から「Recipe: kaishi」をクリックすると、タイプセットが始まります。

次からは、`cmd + option + B` でタイプセットできます（Mac）。
Windows の場合は `ctrl + alt + B` です。

タイプセットが完了したら、`cmd + option + V` で生成されたPDFを別タブで表示できます（Mac）。
Windows の場合は `ctrl + alt + V` です。


# 会誌記事の編集・コミット

## 記事の編集

あとは頑張って会誌を書いてください。

いくつか注意点がありますが、それは後で述べます。


## 変更内容をコミット

会誌の編集は Git で管理されます。

ここまでの変更をコミットしてみましょう。

GitHub Desktop を開くと、変更した部分が表示されています。

左下の入力ボックスに `とりま` と入力して、「Commit to `feature-article-<NAME>`」ボタンをクリックして、
自分の作業ブランチ `feature-article-<NAME>` に変更内容をコミットします。

まだ自分のPCのところでしか反映されていないので、
ウインドウ上部右にある「Push origin」をクリックしてプッシュします。
これで、リモートの方にも変更が反映されました。

編集してコミットしてプッシュ、これの繰り返しです。


## Pull Request

今は自分のブランチ内でしか変更が反映されていないので、
進捗がある程度キリのいいところまでいったら、
全体と統合するためにプルリクエストを行います。

「Create Pull Request」ボタンをクリックするか `cmd + R` を入力すると、
ブラウザでプルリクエスト画面が表示されます。

「compare:」のところに自分のブランチが、「base:」のところに `develop` ブランチが表示されるように設定して、
「Create pull request」ボタンをクリックします。

問題がなければ、「Marge pull request」というボタンが表示されますが、
ここから先は自分1人では行わないでください。

会誌のリポジトリの管理者が、問題がないかチェックしてからマージを行います。


## fetch & Pull

ローカル（自分のPC）のリポジトリより、リモートのリポジトリの方が新しくなっている場合があります。

それを確認するためには「Fetch origin」をクリックしてフェッチをします。
フェッチは自動でも行われます、常に最新を保てるよう定期的に行ってください。

もし、ローカルよりもリモートのリポジトリの方が新しくなっていた場合、
「Pull origin」をクリックしてプルを行えば、最新の変更をローカルに反映します。

## 会誌の編集手順まとめ

以下の作業を繰り返し行います；

1. fetch & pull でローカルのリポジトリを最新に保つ
2. 会誌記事を書く
3. 変更を commit する
4. push で変更をリモートに反映
5. ある程度進捗がまとまったら、develop branch に pull request する


# 会誌記事を書くときの注意点（ルール）

自分の会誌を書く上で、いくつかルールがあるので従ってください。


## プリアンブル

プリアンブルに書いた内容は、全員の記事をマージする際には無視されてしまいます。

パッケージ（sty ファイル）の読み込みや、マクロの定義は、最初に作成した自分の sty ファイルの中に書いてください。

書き方は、普通にプリアンブルに書くときと同じでいいので、難しく考えないでいいです。


## 会誌のタイトル

`\kaishititle` コマンドで、
自分の「会誌のタイトル」「名前」「所属学科・回生」を指定してください。


## 見出し

見出しは `\section` 以下であれば好きに使ってもらってよいです。

ただし、`\chapter` は使わないでください。


## 参考文献

参考文献は `thebibliography` 環境で出力します。

形式はテンプレで示しているものがおそらく正しいので、できるだけその形式を守ってください。

!!! warning
    残念ながら、参考文献や図・数式などのラベルは他人と被ってはいけません。
    なので、最終的に全員の記事をマージする際に、ラベル名を変更してもらう場合があります。

    とりあえずは気にしなくていいです。


## 句読点の自動置換

句読点は、和文のもの（`、。`）ではなく、欧文の全角のもの（`，．`）で統一したいと思います。

そのため、（vscode で）タイプセットする際に、自動で句読点を置換するように設定していますので、注意してください。

!!! note
    一部（タイトルとか）で和文の句読点が使いたいときは、それぞれ句点 `\vku`、読点 `\vtou` のコマンドを書いてください。


# おわりに

多分、よくわからないと思います。

Git とか vscode とかが、何もしてないのに勝手におかしくなったりしたら、
GitHub の会誌のリポジトリに「Issues」というところがあるので、
そこで質問を投げてください。

上級生が懇切丁寧に問題解決に協力してくれます。